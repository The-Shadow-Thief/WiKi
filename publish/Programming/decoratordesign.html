<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Decorator Design Pattern</title>
    <meta name="generator" content="emacs-wiki.el" />
    <meta http-equiv="Content-Type"
          content="text/html; charset=utf-8" />
    <link rel="made" href="mailto:art.of.war.sunzi@gmail.com" />
    <link rel="home" href="../Programming/WelcomePage.html" />
    <link rel="index" href="../WiKiIndex.html.html" />
    <link rel="stylesheet" type="text/css" href="../css/core.css">
  </head>
  <body>

    <!-- If you want a menu, uncomment the following lines and
    put (require 'emacs-wiki-menu) in your Emacs setup somewhere.

    
    -->

    <h1 id="top">Decorator Design Pattern</h1>

    <!-- Page published by Emacs Wiki begins here -->
<p>
<h2>Decorator</h2>

<h3>problem</h3>

<ul>
<li>一群小类（不是鄙视小类啊），系统设计的要求是组合可能的小类来实现其基本的功能。
</li>
<li>例如书中给出的例子，一个coffe店，有各种品种的coffe，而coffe又有很多的调味剂，那这种情况下，
设计出客户想要的口味的，不同品种的coffe的价格。这种情况就是能够随时组装成各种用户需求的咖啡，
并算出其价格。
-java.io的package的设计也是采用了decorate的设计模式，这对输入可以设计出各种情况的数据读到内存中。
</li>
</ul>

<h3>implement</h3>

<p>
实现的方式就是采用decorate的方式，可以将数据按照自己想要的方式进行包装。

</p>

<ul>
<li>采用的inheritance的机制来保持结构的一致性。
</li>
<li>采用composition的机制来保证其灵活性，和扩展性，
</li>
<li>其实就是从一个abstract的父类，或者接口继承下来，然后有一个父类的成员变量，记录其包装(wrap)的对象，
通过这种层层的attach的方式来实现功能的雪球式增长。
</li>
</ul>

<pre class="example">Design Principle:
1. Classes should be open for extension, but closed for modification
2. 

Decorator Pattern attaches additional responsibilities to an object dynamically.
Decorators provide a flexible alternative to subclassing for extending functionality.
</pre>

<p>
根据UML图来进行细解：

</p>

<p>
<a href="decorator_1.gif"><img src="decorator_1.gif" alt="Common&#32;UML" /></a>

</p>

<p>
可以看到Decorator本身就包括父类Componet，这种自包装的方式来实现其功能的增加，或者数据的增加。
实现的效果就是实现了一个复杂的Object，其功能包括concretedecoratorA, concretedecoratorB ....的功能的不同集合，
这些都是在运行时实现的。

</p>

<p>
<a href="decorator_2.gif"><img src="decorator_2.gif" alt="Coffee&#32;UML" /></a>

</p>

<p>
这个图则是详细的实现了coffee店的业务情况。实现了cost和decriptor的功能的组合。

</p>

<p>
此外可以看到下图是java.io的package实现的部分UML图。

</p>

<p>
<a href="decorator_3.gif"><img src="decorator_3.gif" alt="Java.IO" /></a>

</p>

<p>
比如书上的一个例子，通过继承了FilterInputStream,实现输入字符串lower case的设计。

</p>

<p>
C#实现的code 在HOME/cs/designpattern/decorator.cs.

</p>

<p>
</p>

</p>

<p>
<a href="designpattern.html">UP</a>
</p>
    <!-- Page published by Emacs Wiki ends here -->
    <div class="navfoot">
      <hr />
      <table width="100%" border="0" summary="Footer navigation">
        <col width="33%" /><col width="34%" /><col width="33%" />
        <tr>
          <td align="left">
            <span class="footdate">Updated: 2012-02-01</span>
          </td>
          <td align="center">
            <span class="foothome">
              <a href="../WiKiIndex.html">Index</a>
            </span>
          </td>
          <td align="right">
            
          </td>
        </tr>
      </table>
    </div>
  </body>
</html>
